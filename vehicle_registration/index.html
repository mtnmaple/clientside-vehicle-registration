<!DOCTYPE HTML>

<!-- Laura Mills Nelson
	Client Side Programming
	Assignment 3, Vehicle Registration Page
	April 2, 2020-->

<html lang="en">
	<head>
	<title> Vehicle Registration </title>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	
		<script>
			//this will call sub functions for the various fields
			function validateForm(theForm)
			{
				//reason for failing
				var reason = "";
				
				//sub function calls here
				reason += validateFirstName(theForm.fname);
				//other way to write it
				// reason = reason + validateUserName(theForm.username);
				
				reason = reason + validateLastName(theForm.lname);
				reason = reason + validateCarMake(theForm.make);
				reason = reason + validateCarModel(theForm.model);
				reason = reason + validateCarYear(theForm.year);
				reason = reason + validateVIN(theForm.VIN);
				
				
				if(reason !="")
				{
					document.getElementById("p1").innerHTML = reason;
					return false;
				}

				return true;

			}
			
			//fld is a variable
			function validateFirstName(fld)
			{
				var error = "";
				
				var illegalChars = /\W/;
				
				if(fld.value == "")
				{
					//check for empty
					fld.style.background = 'Yellow';
					error = "Owner First Name is empty " + "<br>";
				}
				else if(fld.value.length > 20)
				{
					//check length requirements
					fld.style.background = 'Yellow';
					error = "Owner First Name is too long " + "<br>";
					
				}
				else if(illegalChars.test(fld.value))
				{
					//check for illegal characters
					fld.style.background = 'Yellow';
					error = "Owner First Name has illegal characters " + "<br>";
				}
				else
				{
					fld.style.background = 'White';
				}
				
				
				return error;
				
			}
			
			function validateLastName(fld)
			{
				var error = "";
				
				var illegalChars = /\W/;
				
				if(fld.value == "")
				{
					//check for empty
					fld.style.background = 'Yellow';
					error = "Owner Last Name is empty " + "<br>";
				}
				else if(fld.value.length > 20)
				{
					//check length requirements
					fld.style.background = 'Yellow';
					error = "Owner Last Name is too long " + "<br>";
					
				}
				else if(illegalChars.test(fld.value))
				{
					//check for illegal characters
					fld.style.background = 'Yellow';
					error = "Owner Last Name has illegal characters " + "<br>";
				}
				else
				{
					fld.style.background = 'White';
				}
				
				
				return error;
				
			}
			
			function validateCarMake(fld)
			{
				var error = "";
				
				//no special characters, no numbers
				var illegalChars = /[\W]/;
				var illegalNums = /\d/;
				
				
				if(fld.value == "")
				{
					//check for empty
					fld.style.background = 'Yellow';
					error = "Car Make is empty " + "<br>";
				}
				else if (illegalChars.test(fld.value))
				{
					//check for illegal characters
					fld.style.background = 'Yellow';
					error = "Car Make has illegal characters " + "<br>";
				}
				else if (illegalNums.test(fld.value))
				{
					//check for illegal numbers
					fld.style.background = 'Yellow';
					error = "Car Make cannot contain numbers " + "<br>";
				}
				else
				{
					fld.style.background = 'White';					
				}
				
				return error;
			}
			
			function validateCarModel(fld)
			{
				var error = "";
				
				//no special characters
				var illegalChars = /[\W]/;
				
				
				if(fld.value == "")
				{
					//check for empty
					fld.style.background = 'Yellow';
					error = "Car Model is empty " + "<br>";
				}
				else if (illegalChars.test(fld.value))
				{
					//check for illegal characters
					fld.style.background = 'Yellow';
					error = "Car Model has illegal characters " + "<br>";
				}
				else
				{
					fld.style.background = 'White';					
				}
				
				return error;
			}
			
			function validateCarYear(fld)
			{
				var error = "";
				
				//no special characters, no letters
				var illegalChars = /[\W]/;
				var noLetters = /[A-Z]|[a-z]/;
				
				
				if(fld.value == "")
				{
					//check for empty
					fld.style.background = 'Yellow';
					error = "Car Year is empty " + "<br>";
				}
				else if (illegalChars.test(fld.value))
				{
					//check for illegal characters
					fld.style.background = 'Yellow';
					error = "Car Year has illegal characters " + "<br>";
				}
				else if (noLetters.test(fld.value))
				{
					//check for illegal letters
					fld.style.background = 'Yellow';
					error = "Car Year cannot contain letters " + "<br>";
				}
				else if(fld.value.length != 4)
				{
					//check length requirements
					fld.style.background = 'Yellow';
					error = "Car Year must have 4 digits " + "<br>";					
				}
				else
				{ 
					fld.style.background = 'White';					
				}
				
				return error;
			}
			
			function validateVIN(fld)
			{
				var error = "";
				var allCaps = /[a-z]/;
				var illegalChars = /(\W)|(\O)/;
				
				if(fld.value == "")
				{
					fld.style.background = 'Yellow';
					error = "Blank VIN field " + "<br>";
				}
				else if (allCaps.test(fld.value))
				{
					fld.style.background = 'Yellow';
					error = "VIN cannot contain lowercase letters " + "<br>";
				}
				else if (illegalChars.test(fld.value))
				{
					fld.style.background = 'Yellow';
					error = "VIN cannot contain special characters, nor the letter 'O' " + "<br>";
				}
				else
				{
					fld.style.background = 'White';
					
				}
				
				return error;
				
			}		
	
		</script>
	</head>
	<body>	
	
		<!-- 
			This is a multi-line comment
		-->
	
		<h1>Vehicle Registration</h1>
		<p> (Fields with an * are required) </p>
		<!-- looking for true or false (boolean) with onsubmit from the function validateForm(this). False will kill it. True will lead to the action listed -->
		<form name="registration" onsubmit="return validateForm(this)" action="confirmation.html">
		
			<table border = "1">
				<tr>
					<td><label for="fname">Owner First Name*</label></td>
					<td><input type="text" name="fname" id="fname" size="35" maxlength="50"></td>
				</tr>
				<tr>
					<td><label for="lname">Owner Last Name*</label></td>
					<td><input type="text" name="lname" id="lname" size="35" maxlength="50"></td>
				</tr>	
				<tr>
					<td><label for="make">Car Make*</label></td>
					<td><input type="text" name="make" id="make" size="35" maxlength="50"></td>
				</tr>	
				<tr>
					<td><label for="model">Car Model*</label></td>
					<td><input type="text" name="model" id="model" size="35" maxlength="50"></td>
				</tr>
				<tr>
					<td><label for="year">Car Year*</label></td>
					<td><input type="text" name="year" id="year" size="35" maxlength="50"></td>
				</tr>
				<tr>
					<td><label for="VIN">VIN*</label></td>
					<td><input type="text" name="VIN" id="VIN" size="35" maxlength="50"></td>
				</tr>
				<tr>
					<td><label for="memo">Memo</label></td>
					<td><input type="text" name="memo" id="memo" size="35" maxlength="50"></td>
				</tr>
				<tr>
					<td>&nbsp;</td>
					<td><input type="submit" name="submit" id="submit" value="Submit"></td>
				</tr>

				
			</table>
		
		</form>
	
		<p id="p1"></p>
	
	</body>
</html>